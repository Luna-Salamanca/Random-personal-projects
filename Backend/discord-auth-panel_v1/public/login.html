<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login with Discord</title>
</head>
<body>
  <h1>Login Page</h1>
  <button id="login-btn">Login with Discord</button>

	<script>
		fetch("/config")
			.then(res => res.json())
			.then(({ clientId, redirectUri, scopes }) => {
				const url = new URL("https://discord.com/oauth2/authorize")
				url.searchParams.set("client_id", clientId)
				url.searchParams.set("redirect_uri", redirectUri)
				url.searchParams.set("response_type", "code")
				url.searchParams.set("scope", scopes)
	
				document.getElementById("login-btn").onclick = () => {
					location.href = url.toString()
				}
			})
			.catch(console.error)
	</script>
	
</body>
</html>
